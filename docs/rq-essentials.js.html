<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: rq-essentials.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: rq-essentials.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* global exports:false, console:false */

var

///////////////////////////////////////////////////////////////////////////////
// Basic functions
///////////////////////////////////////////////////////////////////////////////

    /**
     * &lt;hr style="border:0;height:1px;background:#333;background-image:-webkit-linear-gradient(left, #ccc, #333, #ccc);background-image:-moz-linear-gradient(left, #ccc, #333, #ccc);background-image:-ms-linear-gradient(left, #ccc, #333, #ccc);"/>
     * &lt;p>
     * The identity function:
     * &lt;pre>
     *     f(x) = x
     * &lt;/pre>
     * &lt;/p>
     * &lt;p>
     * &lt;em>Aliases&lt;/em>
     * &lt;/p>
     * &lt;p>
     * &lt;ul>
     *     &lt;li>&lt;code>execute&lt;/code>&lt;/li>
     *     &lt;li>&lt;code>run&lt;/code>&lt;/li>
     *     &lt;li>&lt;code>go&lt;/code>&lt;/li>
     * &lt;/ul>
     * &lt;/p>
     * &lt;p
     * &lt;p>
     * Convenient for triggering execution of RQ requestor chains.
     * &lt;/p>
     * ...
     * &lt;p>
     * &lt;em>Usage examples&lt;/em>
     * &lt;/p>
     * &lt;p>
     * Convenient for triggering execution of RQ requestor chains:
     * &lt;pre>
     *     var RQ = ('async-rq'),
     *         rq = ('rq-essentials'),
     *         run = rq.run;
     *
     *     RQ.sequence([
     *         myRequestor,
     *         myNextRequestor,
     *         ...
     *     ])(run)
     * &lt;/pre>
     * &lt;/p>
     * &lt;hr style="border:0;height:1px;background:#333;background-image:-webkit-linear-gradient(left, #ccc, #333, #ccc);background-image:-moz-linear-gradient(left, #ccc, #333, #ccc);background-image:-ms-linear-gradient(left, #ccc, #333, #ccc);"/>'
     *
     * @function
     * @param {*} value the argument that will be returned
     */
    identity = exports.identity = exports.execute = exports.run = exports.go =
        function (value) {
            'use strict';
            return value;
        },


///////////////////////////////////////////////////////////////////////////////
// Requestors
//
// Functions that executes requests, synchronously or asynchronously
// Asynchronicity is handled by callbacks.
// ("callbacks" were previously called "request continuations"/"requestions".)
//
// Standard 'canned' requestors below
///////////////////////////////////////////////////////////////////////////////

    /**
     * &lt;hr style="border:0;height:1px;background:#333;background-image:-webkit-linear-gradient(left, #ccc, #333, #ccc);background-image:-moz-linear-gradient(left, #ccc, #333, #ccc);background-image:-ms-linear-gradient(left, #ccc, #333, #ccc);"/>
     * &lt;p>
     * The requestor version of "the null function":
     * &lt;pre>
     *     f(callback, x) = callback(undefined)
     * &lt;/pre>
     * &lt;/p>
     * &lt;p>
     * A "data generator" requestor => No forwarding of incoming arguments/data.
     * A typical parallel requestor, or as a starting requestor in a sequence.
     * &lt;/p>
     * ...
     * &lt;p>
     * &lt;em>Usage examples&lt;/em>
     * &lt;/p>
     * &lt;p>
     * &lt;code>undefined&lt;/code> as argument to &lt;code>myNextRequestor&lt;/code>:
     * &lt;pre>
     *     var RQ = ('async-rq');
     *     var rq = ('rq-essentials');
     *
     *     RQ.sequence([
     *         rq.undefined,
     *         myNextRequestor,
     *         ...
     *     ])
     * &lt;/pre>
     * &lt;/p>
     * &lt;hr style="border:0;height:1px;background:#333;background-image:-webkit-linear-gradient(left, #ccc, #333, #ccc);background-image:-moz-linear-gradient(left, #ccc, #333, #ccc);background-image:-ms-linear-gradient(left, #ccc, #333, #ccc);"/>
     *
     * @function
     */
    nullRequestor = exports.undefined =
        function (callback, args) {
            'use strict';
            return callback(undefined, undefined);
        },


    /**
     * The requestor version of "the empty function":
     * &lt;pre>
     *     f(callback, x) = callback(null)
     * &lt;/pre>
     */
    emptyRequestor = exports.empty = exports.null =
        function (callback, args) {
            'use strict';
            return callback(null, undefined);
        },


    /**
     * The tautology requestor:
     * &lt;pre>
     *     f(callback, x) = callback(true)
     * &lt;/pre>
     */
    tautologyRequestor = exports.true =
        function (callback, args) {
            'use strict';
            return callback(true, undefined);
        },


    /**
     * The contradiction requestor:
     * &lt;pre>
     *     f(callback, x) = callback(false)
     * &lt;/pre>
     */
    contradictionRequestor = exports.false =
        function (callback, args) {
            'use strict';
            return callback(false, undefined);
        },


    /**
     * The UNIX timestamp requestor:
     * &lt;pre>
     *     f(callback, x) = callback(Date.now())
     * &lt;/pre>
     * Returning &lt;code>Date.now()&lt;/code>, the number of milliseconds elapsed since 1 January 1970 00:00:00 UTC.
     */
    timestampRequestor = exports.timestamp = exports.now =
        function (callback, args) {
            'use strict';
            return callback(Date.now(), undefined);
        },


    /**
     * The "new Date()" requestor:
     * &lt;pre>
     *     f(callback, x) = callback(new Date())
     * &lt;/pre>
     */
    dateRequestor = exports.date =
        function (callback, args) {
            'use strict';
            return callback(new Date(), undefined);
        },


    /**
     * The NOP/NOOP requestor:
     * &lt;pre>
     *     f(callback, x) = callback(x)
     * &lt;/pre>
     *
     * Just pass things along without doing anything ...
     */
    noopRequestor = exports.noop =
        function (callback, args) {
            'use strict';
            return callback(args, undefined);
        },


    /**
     * &lt;hr style="border:0;height:1px;background:#333;background-image:-webkit-linear-gradient(left, #ccc, #333, #ccc);background-image:-moz-linear-gradient(left, #ccc, #333, #ccc);background-image:-ms-linear-gradient(left, #ccc, #333, #ccc);"/>
     * @function
     * @type {Function}
     * @param {*} value the argument that will be returned
     * @return {*} the given argument
     */
    notImplemented = exports.notImplemented =
        function (callback, args) {
            'use strict';
            throw new Error('Not yet implemented');
        },


///////////////////////////////////////////////////////////////////////////////
// More requestors, curry-friendly.
//
// Functions that executes requests, synchronously or asynchronously
// Asynchronicity is handled by callbacks.
// ("callbacks" were previously called "request continuations"/"requestions".)
///////////////////////////////////////////////////////////////////////////////

    /**
     * &lt;pre>
     *     f(g, callback, x) = callback(g(x))
     * &lt;/pre>
     *
     * This is the curry-friendly version of the primary requestor factory below (with the alias 'then').
     * Especially handy when you have to curry the callback, e.g. when terminating nested requestor pipelines.
     *
     */
        // TODO: Do not feel I am quite on top of this one ... What does this function really do!?
    terminatorRequestor = exports.terminator =
        function (g, callback, args) {
            'use strict';
            return callback(g(args), undefined);
        },


    /**
     * &lt;pre>
     *     f(g, y, callback, x) = callback(g(y))
     * &lt;/pre>
     *
     * This function hi-jacks the argument-passing by substituting the callback arguments with its own.
     */
        // TODO: Do not feel I am quite on top of this one ... What does this function really do!?
    interceptorRequestor = exports.interceptor =
        function (g, y, callback, args) {
            'use strict';

            // Argument 'y' may come from other requestors => cloning arguments due to Object.freeze() in RQ
            //return callback(g(_clone(y)));

            return callback(g(y), undefined);
        },


///////////////////////////////////////////////////////////////////////////////
// Requestor factories
// - Takes arguments and returns a requestor function.
// ("Requestor factories" were previously called "requestories".)
///////////////////////////////////////////////////////////////////////////////

    /**
     * &lt;pre>
     *     f(x) = F(callback(x))
     * &lt;/pre>
     *
     * A "data generator" requestor => No forwarding of existing data.
     * A typical parallel requestor, or as a starting requestor in a sequence ...
     */
    identityFactory = exports.return = exports.value =
        function (value) {
            'use strict';
            return function requestor(callback, args) {
                return callback(value, undefined);
            };
        },


    /**
     * ...
     */
    conditionalFactory = exports.condition = exports.if =
        function (condition) {
            'use strict';
            return function requestor(callback, args) {
                if (condition.call(this, args)) {
                    return callback(args, undefined);
                } else {
                    return callback(undefined, 'Condition not met');
                }
            };
        },


    /**
     * ...
     */
    instrumentedConditionalFactory = exports.instrumentedCondition = exports.instrumentedIf =
        function (condition, options) {
            'use strict';
            return function requestor(callback, args) {
                if (condition.call(this, args)) {
                    if (options &amp;&amp; options.success) {
                        console.log(options.name + ': ' + options.success);
                    }
                    return callback(args, undefined);
                }
                else {
                    if (options &amp;&amp; options.failure) {
                        console.warn(options.name + ': ' + options.failure);
                    }
                    return callback(undefined, 'Condition not met');
                }
            };
        },


    /**
     * &lt;p>
     * Execution of arbitrary function:
     * &lt;pre>
     *     f(g) = g(); F(callback(x))
     * &lt;/pre>
     * &lt;/p>
     * &lt;p>
     * The given function will be executed isolated from the requestor argument passing.
     * &lt;/p>
     */
    arbitraryFunctionExecutorFactory = exports.exec = exports.terminate =
        function (g) {
            'use strict';
            return function requestor(callback, args) {
                g.call(this, null);
                return callback(args, undefined);
            };
        },


    /**
     * &lt;p>
     * Simple interceptor for execution of arbitrary function and argument:
     * &lt;pre>
     *     f(g, y) = g(y); F(callback(x))
     * &lt;/pre>
     * &lt;/p>
     * &lt;p>
     * The given function will be executed isolated from the requestor argument passing.
     * &lt;/p>
     */
    arbitraryFunctionAndArgumentExecutorFactory = exports.execArgs = exports.terminateArgs =
        function (g, y) {
            'use strict';
            return function requestor(callback, args) {
                g.call(this, y);
                return callback(args, undefined);
            };
        },


    /**
     * The primary requestor factory:
     * &lt;pre>
     *     f(g) = F(callback(g(x)))
     * &lt;/pre>
     *
     * A typical sequence requestor ...
     */
        // TODO: To be a pure function, the arguments have to be cloned/not mutated
    failFastFunctionFactory = exports.requestorize = exports.requestor = exports.then = exports.do =
        function (g) {
            'use strict';
            return function requestor(callback, args) {
                return callback(g(args), undefined);
            };
        },


/**
 * &lt;p>
 * &lt;pre>
 *     f(g, y) = g(y); F(callback(x))
 * &lt;/pre>
 * &lt;/p>
 */
// Same as arbitraryFunctionExecutorFactory above ...
//terminatorRequestorFactory = exports.terminate =
//    function (callbackToInvoke, argsToBeInvokedWith) {
//        'use strict';
//        return function (callback, args) {
//            callbackToInvoke(argsToBeInvokedWith, undefined);
//            return callback(args, undefined);
//        };
//    },
//


    /**
     * The more lenient requestor factory:
     * &lt;pre>
     *     f(g) = F(callback(g(x)))
     * &lt;/pre>
     * Catching exceptions, logging them, and terminating execution of requestors.
     *
     * A typical sequence requestor ...
     */
    lenientFunctionFactory = exports.lenientRequestorize = exports.lenientRequestor =
        function (g) {
            'use strict';
            return function requestor(callback, args) {
                var result;
                try {
                    result = g(args);
                    return callback(result, undefined);

                } catch (e) {
                    console.error(e.message);
                    return callback(undefined, e);
                }
            };
        },


    /**
     * ...
     */
    cancelFactory = exports.cancel =
        function (callbackToCancel, logMessage) {
            'use strict';
            return function requestor(callback, args) {
                callback(args, undefined);
                if (logMessage) {
                    console.error(logMessage);
                    return callbackToCancel(undefined, logMessage);
                } else {
                    return callbackToCancel(undefined, 'Callback cancelled');
                }
            };
        };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#arbitraryFunctionAndArgumentExecutorFactory">arbitraryFunctionAndArgumentExecutorFactory</a></li><li><a href="global.html#arbitraryFunctionExecutorFactory">arbitraryFunctionExecutorFactory</a></li><li><a href="global.html#autoCurry">autoCurry</a></li><li><a href="global.html#cacheRead">cacheRead</a></li><li><a href="global.html#cacheWrite">cacheWrite</a></li><li><a href="global.html#cancelFactory">cancelFactory</a></li><li><a href="global.html#clone">clone</a></li><li><a href="global.html#conditionalFactory">conditionalFactory</a></li><li><a href="global.html#contradictionRequestor">contradictionRequestor</a></li><li><a href="global.html#curry">curry</a></li><li><a href="global.html#dateRequestor">dateRequestor</a></li><li><a href="global.html#decorateFunctionPrototypeWithAutoCurry">decorateFunctionPrototypeWithAutoCurry</a></li><li><a href="global.html#dispatchResponseStatusCode">dispatchResponseStatusCode</a></li><li><a href="global.html#dispatchResponseWithJsonBody">dispatchResponseWithJsonBody</a></li><li><a href="global.html#dispatchResponseWithScalarBody">dispatchResponseWithScalarBody</a></li><li><a href="global.html#emptyRequestor">emptyRequestor</a></li><li><a href="global.html#executeAndVerify">executeAndVerify</a></li><li><a href="global.html#failFastFunctionFactory">failFastFunctionFactory</a></li><li><a href="global.html#getRequestorizer">getRequestorizer</a></li><li><a href="global.html#identity">identity</a></li><li><a href="global.html#identityFactory">identityFactory</a></li><li><a href="global.html#instrumentedConditionalFactory">instrumentedConditionalFactory</a></li><li><a href="global.html#interceptorRequestor">interceptorRequestor</a></li><li><a href="global.html#lenientFunctionFactory">lenientFunctionFactory</a></li><li><a href="global.html#noopRequestor">noopRequestor</a></li><li><a href="global.html#notImplemented">notImplemented</a></li><li><a href="global.html#nullRequestor">nullRequestor</a></li><li><a href="global.html#slice">slice</a></li><li><a href="global.html#tautologyRequestor">tautologyRequestor</a></li><li><a href="global.html#terminatorRequestor">terminatorRequestor</a></li><li><a href="global.html#timestampRequestor">timestampRequestor</a></li><li><a href="global.html#toArray">toArray</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0</a> on Thu May 14 2015 08:51:47 GMT+0200 (W. Europe Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
